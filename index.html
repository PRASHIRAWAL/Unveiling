<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Grand Unveiling</title>
<style>
    /* your existing CSS unchanged */
</style>
</head>
<body>
    <div class="stage">
        <div class="curtain curtain-left" id="curtainLeft"></div>
        <div class="curtain curtain-right" id="curtainRight"></div>
        <div class="logo-container" id="logoContainer">
            <div class="logo" id="logoElement">
                <img src="p1.png" alt="Logo">
            </div>
        </div>
        <div class="controls">
            <div class="countdown" id="countdown"></div>
            <button class="start-button" id="startButton">ðŸŽ­ Start Grand Unveiling</button>
        </div>
    </div>

    <!-- Hidden preloaded audio -->
    <audio id="confettiSound" src="S1.mp3" preload="auto"></audio>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const startButton = document.getElementById('startButton');
    const countdown = document.getElementById('countdown');
    const curtainLeft = document.getElementById('curtainLeft');
    const curtainRight = document.getElementById('curtainRight');
    const logoContainer = document.getElementById('logoContainer');
    const confettiSound = document.getElementById('confettiSound');

    let countdownInterval;
    let currentCount = 10;
    let isRevealed = false;

    const createBeep = () => {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.frequency.value = 1200;
        gain.gain.setValueAtTime(0.3, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.15);
        osc.start();
        osc.stop(ctx.currentTime + 0.15);
    };

    const createConfetti = () => {
        const colors = ['#FFD700', '#FF6B6B', '#4ECDC4'];
        for (let i = 0; i < 150; i++) {
            setTimeout(() => {
                const confetti = document.createElement('div');
                confetti.className = 'confetti-piece';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-20px';
                const size = Math.random() * 8 + 6;
                confetti.style.width = size + 'px';
                confetti.style.height = size + 'px';
                const duration = Math.random() * 3 + 3;
                confetti.style.animation = `confetti-fall ${duration}s linear`;
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), duration * 1000);
            }, i * 50);
        }
    };

    const playConfettiSound = () => {
        confettiSound.volume = 1.0;
        confettiSound.play().catch(err => {
            console.warn("Audio playback failed:", err);
        });
    };

    const revealLogo = () => {
        curtainLeft.classList.add('open');
        curtainRight.classList.add('open');
        setTimeout(() => {
            playConfettiSound();
            createConfetti();
            logoContainer.classList.add('revealed');
        }, 1000);
        isRevealed = true;
    };

    const startCountdown = () => {
        if (isRevealed) return;
        startButton.style.display = 'none';
        countdown.classList.add('active');
        currentCount = 5;
        countdown.textContent = currentCount;
        countdownInterval = setInterval(() => {
            currentCount--;
            if (currentCount > 0) {
                countdown.textContent = currentCount;
                countdown.classList.add('pulse');
                createBeep();
                setTimeout(() => countdown.classList.remove('pulse'), 600);
            } else {
                clearInterval(countdownInterval);
                countdown.textContent = '';
                revealLogo();
            }
        }, 1000);
    };

    startButton.addEventListener('click', startCountdown);
});
</script>
</body>
</html>
